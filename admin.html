<!DOCTYPE html>
<html>
<head>
<title>ADMIN PANEL</title>
<style>
body{
  font-family:Arial;
  background:#f2f2f2;
  padding:30px
}
.box{
  background:#fff;
  padding:20px;
  width:420px;
  border-radius:10px
}
select,input,button{
  padding:8px;
  margin-top:8px;
  width:100%
}
</style>
</head>
<body>

<div class="box">
<h3>ADMIN â€“ Reset User Password</h3>

<select id="userList"></select>
<input id="newPass" type="password" placeholder="New Password">
<button onclick="resetPass()">Change Password</button>

<br><br>
<button onclick="logout()">Logout</button>
</div>

<script>
/* ðŸ” AUTH CHECK */
if (localStorage.getItem("vw_role") !== "admin") {
  alert("Unauthorized");
  location.href = "login.html";
}

/* ðŸ“¦ LOAD USERS */
const users = JSON.parse(localStorage.getItem("vw_users") || "{}");
const sel = document.getElementById("userList");

if (Object.keys(users).length === 0) {
  alert("No users found");
}

/* ðŸ‘¥ FILL USER LIST */
Object.keys(users).forEach(u => {
  if (users[u].role !== "admin") {
    const o = document.createElement("option");
    o.value = u;
    o.text = u;
    sel.appendChild(o);
  }
});

/* ðŸ”‘ RESET PASSWORD */
function resetPass(){
  if (!sel.value || !newPass.value) {
    alert("Select user & enter password");
    return;
  }
  users[sel.value].password = newPass.value;
  localStorage.setItem("vw_users", JSON.stringify(users));
  alert("Password Updated");
  newPass.value = "";
}

/* ðŸšª LOGOUT */
function logout(){
  localStorage.removeItem("vw_user");
  localStorage.removeItem("vw_role");
  location.href = "login.html";
}
</script>

</body>
</html>
