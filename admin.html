<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ADMIN PANEL</title>
<style>
body{font-family:Arial;background:#f2f2f2;padding:30px}
.box{background:#fff;padding:20px;width:400px;border-radius:8px}
select,input,button{padding:8px;margin-top:8px;width:100%}
</style>
</head>
<body>

<div class="box">
  <h3>ADMIN – Reset User Password</h3>

  <select id="userList"></select>
  <input type="password" id="newPass" placeholder="New Password">
  <button onclick="resetPass()">Change Password</button>

  <br><br>
  <button onclick="logout()">Logout</button>
</div>

<script>
// फक्त admin ला access
if(localStorage.getItem("vw_role")!=="admin"){
  alert("Unauthorized");
  location.href="login.html";
}

// user list load
const allUsers = JSON.parse(localStorage.getItem("vw_users") || "{}");
const sel = document.getElementById("userList");

Object.keys(allUsers).forEach(u=>{
  if(u!=="ADMIN"){
    const o=document.createElement("option");
    o.value=u;
    o.text=u;
    sel.appendChild(o);
  }
});

function resetPass(){
  const u = sel.value;
  const p = document.getElementById("newPass").value;
  if(!p){
    alert("Password enter kara");
    return;
  }
  allUsers[u].password = p;
  localStorage.setItem("vw_users", JSON.stringify(allUsers));
  alert("Password changed for " + u);
  document.getElementById("newPass").value="";
}

function logout(){
  localStorage.removeItem("vw_user");
  localStorage.removeItem("vw_role");
  location.href="login.html";
}
</script>

</body>
</html>
